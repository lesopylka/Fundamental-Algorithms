// –ü—Ä–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–∏ÃÜ –∏–∑ –¥–∞–Ω–Ω–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –∑–∞–ø—Ä–µ—â–∞–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å—Ç—Ä–æ–∫–æ–≤—ã–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ–º —á–∏—Å–ª–∞ 
// –≤ –¥–≤–æ–∏—á–Ω–æ–∏ÃÜ —Å–∏—Å—Ç–µ–º–µ —Å—á–∏—Å–ª–µ–Ω–∏—è. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã, —Ñ–∏–≥—É—Ä–∏—Ä—É—é—â–∏–µ –≤ —É—Å–ª–æ–≤–∏–∏, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å—á–∏—Ç–∞—Ç—å —Å –∫–æ–Ω—Å–æ–ª–∏
//  (–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Ö –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å). –û–±–µ —Ñ—É–Ω–∫—Ü–∏–∏:
// - –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–∏ÃÜ –º–∞—Å—Å–∏–≤ –Ω–∞–∏ÃÜ–¥–µ–Ω–Ω—ã—Ö —á–∏—Å–µ–ª, –æ—Ç –º–µ–Ω—å—à–µ–≥–æ –∫ –±–æ–ª—å—à–µ–º—É, —á–µ—Ä–µ–∑ —Å–≤–æ–∏ÃÜ –ø–∞—Ä–∞–º–µ—Ç—Ä;
// - –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –¥–ª–∏–Ω—É –º–∞—Å—Å–∏–≤–∞ —á–µ—Ä–µ–∑ —Å–≤–æ–∏ÃÜ –ø–∞—Ä–∞–º–µ—Ç—Ä;
// - –∏–º–µ—é—Ç —Ç–∏–ø –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è void.
// 1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–∏—Å–∫–∞ –≤—Å–µ—Ö ùëò ‚àí –±–∏—Ç–Ω—ã—Ö —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª —Ç–∏–ø–∞ int, –≤ –¥–≤–æ–∏—á–Ω–æ–∏ÃÜ –∑–∞–ø–∏—Å–∏ –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ä–æ–≤–Ω–æ ùëô, 
// ùëô‚â§ùëò –µ–¥–∏–Ω–∏—Ü.
// 2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–∏—Å–∫–∞ –≤—Å–µ—Ö ùëò ‚àí –±–∏—Ç–Ω—ã—Ö —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª —Ç–∏–ø–∞ int, –≤ –¥–≤–æ–∏—á–Ω–æ–∏ÃÜ –∑–∞–ø–∏—Å–∏ –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ä–æ–≤–Ω–æ ùëô, 
// ùëô‚â§ùëò –ø–æ–¥—Ä—è–¥ –∏–¥—É—â–∏—Ö –µ–¥–∏–Ω–∏—Ü. –ü—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–∏ÃÜ—Ç–µ —Ä–∞–±–æ—Ç—É —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–∏ÃÜ.


#include <stdio.h>
#include <stdlib.h>

void print(int * list, int ln) {
  for (int i = 0; i < ln; i++) {
    printf("%d ", list[i]);
  }
  printf("\n");
}

int numBits(int k) {
  return 2 << (k - 1);
}

long long factorial(int n) {
  if (n > 22)
    return 2;
  else if (n == 0)
    return 1;
  else
    return (long long) n * factorial(n - 1);
}

int getMem(int l, int k) {
  long long a = factorial(k);
  long long b = factorial(l);
  long long c = factorial(k - l);
  return (int)(a / (b * c));
}

int checkBits(int l, int num, int straight) {
  int counter = 0;
  if (!straight) {
    while (num != 0) {
      counter += (num & 1);
      num >>= 1;
    }
  } else {
    while (num != 0) {
      if (!(num & 1)) {
        if (counter == l)
          break;
        counter = 0;
      } else
        counter++;
      num >>= 1;
    }
  }
  return counter == l;
}

int bitsIn(int l, int k, int ** list, int * len) {
  int lim = numBits(k);
  int size = getMem(l, k);
  * list = (int * ) calloc(size, sizeof(int));
  if ( * list == NULL) {
    return 1;
  }
  for (int i = 0; i < lim; i++) {
    if (checkBits(l, i, 0)) {
      ( * list)[( * len) ++] = i;
    }
  }
  return size ? 0 : -1;
}

int bitsForward(int l, int k, int ** list, int * len) {
  int lim = numBits(k);
  int pred = numBits(l) - 1;
  int size = lim - pred;
  * list = (int * ) malloc(size * sizeof(int));
  if ( * list == NULL) {
    return 1;
  }
  for (int i = pred; i < lim; i++) {
    if (checkBits(l, i, 1)) {
      ( * list)[( * len) ++] = i;
    }
  }
  return size ? 0 : -1;
}

int main() {
  int l, k;
  int statusCode = 0;
  int len = 0;
  int * list = NULL;
  int * straight = NULL;
  printf("Enter l: ");
  if (!scanf("%d", & l)) {
    return 7;
  }
  printf("\nEnter k: ");
  if (!scanf("%d", & k)) {
    return 7;
  }
  if (k > 31) {
    return 31;
  }
  if (l > k || l < 0 || k < 0) {
    return 7;
  }
  statusCode = bitsIn(l, k, & list, & len);
  if (statusCode != 0) {
    free(list);
    return statusCode;
  }
  print(list, len);
  free(list);
  printf("\n\n");
  len = 0;
  statusCode = bitsForward(l, k, & straight, & len);
  if (statusCode != 0) {
    free(straight);
    return statusCode;
  }
  print(straight, len);
  free(straight);
  return 0;
}